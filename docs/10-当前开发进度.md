# 当前开发进度

> 本文档随开发更新，用于快速查看各阶段完成情况与下一步工作。

**最后更新**：2026-02-26

---

## 1. 阶段总览

| 阶段 | 名称 | 状态 | 说明 |
|------|------|------|------|
| **M0** | 环境与文档 | ✅ 已通过验收 | 环境统一、技术栈确认、目录与 README、.gitignore、requirements.txt、前端 package.json |
| **M1** | GUI 原型与架构设计 | ✅ 已通过验收 | pywebview + Vue 3、6 个页面、Mock 后端、API 契约与 bridge |
| **M2** | 浏览器自动化基础 | 🔨 开发中 | Playwright、登录/搜索/评论/用户、分级风控 |
| **M3** | 数据层与任务编排 | ⏳ 未开始 | SQLite、任务状态机、采集流水线、断点续跑 |
| **M4** | 规则筛选 | ⏳ 未开始 | 关键词/正则规则引擎、去重与历史、AI 预留 |
| **M5** | 私信发送与风控 | ⏳ 未开始 | DOM 发私信、模板变量、全自动/人工确认、限速 |
| **M6** | GUI 集成与功能完善 | ⏳ 未开始 | Mock 替换真实后端、实时进度、导出、全流程串联 |
| **M7** | 联调与发布准备 | ⏳ 未开始 | 端到端联调、文档定稿、合规与迭代路线图 |

---

## 2. 当前阶段：M2（进行中）

- **目标**：在抖音 PC 网页版上通过 Playwright 完成登录与会话保持、关键词搜索、视频列表与一级评论拉取、用户信息提取，以及分级风控与 session 校验。
- **文档**：[03-阶段2-浏览器自动化基础.md](03-阶段2-浏览器自动化基础.md)
- **产出**：`src/backend/browser/`（engine、selectors、risk）、Cookie 持久化（`data/douyin_storage_state.json`）、风控参数配置；验收脚本 `scripts/run_m2_acceptance.py`。选择器与经验见 [09-项目经验与关键信息.md](09-项目经验与关键信息.md)。

---

## 3. 已完成交付物摘要

### M0

- 目录：`docs/`、`src/backend/`、`src/frontend/`、`config/`、`data/`（.gitignore）
- README：环境要求（Python 3.10～3.12 建议）、安装与运行、Windows/pywebview 说明
- 依赖：`requirements.txt`（pywebview、playwright、python-dotenv）；`src/frontend/package.json`（Vue 3、Vite、Naive UI、Vue Router、Pinia）

### M1

- **入口**：`main.py`（pywebview 窗口，开发/生产 URL，js_api=MockApi）
- **后端**：`src/backend/api/api.py`（Api 契约）、`src/backend/api/mock.py`（MockApi 全接口）
- **前端**：6 个页面（任务管理、采集监控、名单审核、发送控制、历史记录、系统设置）、路由、`src/frontend/src/api/bridge.ts`（封装 `window.pywebview.api`）
- **验收**：详见 [验收-阶段0-环境与文档.md](验收-阶段0-环境与文档.md)、[验收-阶段1-GUI原型与架构设计.md](验收-阶段1-GUI原型与架构设计.md)

---

## 4. 建议后续补齐（非阻塞）

| 项 | 阶段 | 说明 |
|----|------|------|
| 任务编辑弹窗 | M1/M6 | 任务管理页「编辑」当前为 TODO，可与创建表单复用 |
| 规则表单项 | M1/M4 | 创建/编辑任务时增加白名单、黑名单、正则配置，与 RuleConfig 对接 |
| 名单审核「确认发送」 | M1/M6 | 人工确认模式下在名单页增加「确认发送」入口，调用 start_sending |

---

## 5. 相关文档

- [00-总览与索引](00-总览与索引.md) — 方案结构、阶段依赖、关键决策
- [09-项目经验与关键信息](09-项目经验与关键信息.md) — 环境坑点、运行方式、元素/接口/Cookie/风控
- [验收-阶段0-环境与文档](验收-阶段0-环境与文档.md)、[验收-阶段1-GUI原型与架构设计](验收-阶段1-GUI原型与架构设计.md) — 验收明细
